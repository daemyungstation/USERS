<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="FMAMainMngDao">
	<select id="selectVisualMainList" parameterType="emfMap" resultType="emfMap">
		SELECT 
			VISUAL_SEQ,
			GRP_ID,
			LIVE_GRP_ID,
			WEB_BG_COLOR,
			WEB_BG_PATH,
			WEB_BG_SAVE_FILE_NM,
			WEB_BG_REAL_FILE_NM,
			WEB_TITLE_PATH,
			WEB_TITLE_SAVE_FILE_NM,
			WEB_TITLE_REAL_FILE_NM,
			WEB_TITLE_DSC,
			WEB_TITLE_TXT,
			WEB_BTN_PATH,
			WEB_BTN_SAVE_FILE_NM,
			WEB_BTN_REAL_FILE_NM,
			LINK,
			LINK_TYPE,
			TITLE_IMG_XY,
			TITLE_TXT_XY,
			BTN_XY,
			BG_XY,
			ORDERBY
		FROM CO_MAIN_VISUAL
		WHERE GRP_ID = (SELECT MAX(LIVE_GRP_ID) FROM CO_MAIN_VISUAL WHERE LIVE_GRP_ID IS NOT NULL)
		AND USE_YN = 'Y'
    	AND USE_STRT_DTM <![CDATA[<=]]> TO_CHAR(SYSDATE, 'YYYY-MM-DD') AND USE_END_DTM <![CDATA[>=]]> TO_CHAR(SYSDATE, 'YYYY-MM-DD')
		ORDER BY ORDERBY ASC, VISUAL_SEQ ASC
	</select>
	
	<select id="selectContentMainList" parameterType="emfMap" resultType="emfMap">
		SELECT
			A.CNTNS_MST_SEQ,
			A.GRP_ID,
			A.TITLE_TXT,
			A.TITLE_COLOR,
			A.ORDERBY AS CORDERBY,
			
			B.CNTNS_DTL_SEQ,
			B.IMG_PATH,
			B.IMG_SAVE_FILE_NM,
			B.IMG_REAL_FILE_NM,
			B.TITLE,
			B.DSC,
			B.LINK,
			B.LINK_TYPE,
			B.ORDERBY AS DORDERBY
		FROM CO_MAIN_CNTNS_MST A 
		LEFT JOIN CO_MAIN_CNTNS_DTL B ON A.CNTNS_MST_SEQ=B.CNTNS_MST_SEQ 
		WHERE A.GRP_ID = (SELECT MAX(LIVE_GRP_ID) FROM CO_MAIN_VISUAL WHERE LIVE_GRP_ID IS NOT NULL)
		AND A.USE_YN = 'Y'
    	AND A.USE_STRT_DTM <![CDATA[<=]]> TO_CHAR(SYSDATE, 'YYYY-MM-DD') AND A.USE_END_DTM <![CDATA[>=]]> TO_CHAR(SYSDATE, 'YYYY-MM-DD')
		AND B.USE_YN = 'Y'
    	AND B.USE_STRT_DTM <![CDATA[<=]]> TO_CHAR(SYSDATE, 'YYYY-MM-DD') AND B.USE_END_DTM <![CDATA[>=]]> TO_CHAR(SYSDATE, 'YYYY-MM-DD')
		ORDER BY A.ORDERBY ASC, CNTNS_MST_SEQ ASC, B.ORDERBY ASC, CNTNS_DTL_SEQ ASC
	</select>
</mapper>